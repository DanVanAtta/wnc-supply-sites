<html xmlns="http://www.w3.org/1999/html" lang="en">
    <head>
        <title>WNC Supply Sites - {{ siteName }}</title>
        <script type="text/javascript" src="site-detail.js"></script>
        <link rel="stylesheet" href="../style.css" />
        <link rel="stylesheet" href="site-detail.css" />
        <link rel="stylesheet" href="../mobile.css" />
        <link
            rel="stylesheet"
            href="https://maxcdn.bootstrapcdn.com/font-awesome/4.4.0/css/font-awesome.min.css"
        />

        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        {{> header-include }}
    </head>

    <body>
        {{> header }}
        <h2>{{siteName}}</h2>
        <div class="back-link">
            <a href="/supplies/site-list">[&larr; Go Back]</a>
        </div>

        <div class="mission-statement">
            <dl>
                {{#website}}
                <dt>Website</dt>
                <dd class="detail-value"><a href="{{href}}">{{title}}</a></dd>
                {{/website}} {{#facebook}}
                <dt>Facebook</dt>
                <dd class="detail-value"><a href="{{href}}">{{title}}</a></dd>
                {{/facebook}}

                <dt>Address</dt>
                <dd class="detail-value">
                    {{addressLine1}}<br />{{addressLine2}}
                </dd>

                {{#hours}}
                <dt>Hours</dt>
                <dd class="detail-value">
                    <textarea rows="5" cols="20" readonly>{{.}}</textarea>
                </dd>
                {{/hours}}
            </dl>

            <hr />
            <div class="mapouter">
                <div class="gmap_canvas">
                    <iframe
                        class="gmap_iframe"
                        frameborder="0"
                        scrolling="no"
                        marginheight="0"
                        marginwidth="0"
                        src="https://maps.google.com/maps?width=600&amp;height=500&amp;hl=en&amp;q={{googleMapsAddress}}&amp;t=&amp;z=10&amp;ie=UTF8&amp;iwloc=B&amp;output=embed"
                    >
                    </iframe>
                </div>
            </div>
        </div>

        {{#loggedIn}}
        <h2>
            Contact
            <span class="privately-visible">*</span>
            <a class="edit-link" href="{{{editContactLink}}}">[edit]</a>
        </h2>
        <div class="privately-visible">
            * Indicates field is visible because you are logged in
        </div>

        <div class="mission-statement">
            <dl>
                {{#contactName}}
                <dt>Contact:</dt>
                <dd class="bold">{{.}}</dd>
                {{/contactName}}

                <dt>Number:</dt>
                <dd class="detail-value bold">
                    {{^contactNumber}} None listed {{/contactNumber}}
                    {{#contactNumber}} {{#href}}
                    <a href="{{.}}"> {{/href}} {{title}} {{#href}} </a>
                    {{/href}} {{/contactNumber}}
                </dd>
            </dl>

            {{#additionalContacts}}
            <dl>
                <dt>Additional Site Contacts:</dt>
                <dd>
                    <pre>
                      {{.}}
                    </pre>
                </dd>
            </dl>
            {{/additionalContacts}}
        </div>

        <h2>
            Receiving Capabilities
            <span class="privately-visible">*</span>
            <a class="edit-link" href="{{{editContactLink}}}">[edit]</a>
        </h2>

        <div class="mission-statement">
            <div class="data-field vertical">
                <div class="horizontal checkbox-option">
                    {{^hasForklift}}<span class="red small-right-margin"
                        >&times;</span
                    >{{/hasForklift}} {{#hasForklift}}<span
                        class="green small-right-margin"
                        >&#10003;</span
                    >{{/hasForklift}}
                    <span>Have Forklift</span>
                </div>
                <div class="horizontal checkbox-option">
                    {{^hasLoadingDock}}<span class="red small-right-margin"
                        >&times;</span
                    >{{/hasLoadingDock}} {{#hasLoadingDock}}<span
                        class="green small-right-margin"
                        >&#10003;</span
                    >{{/hasLoadingDock}}
                    <span>Have Loading Dock</span>
                </div>
                <div class="horizontal checkbox-option">
                    {{^hasIndoorStorage}}<span class="red small-right-margin"
                        >&times;</span
                    >{{/hasIndoorStorage}} {{#hasIndoorStorage}}<span
                        class="green small-right-margin"
                        >&#10003;</span
                    >{{/hasIndoorStorage}}
                    <span>Have Indoor Storage</span>
                </div>
            </div>
        </div>

        <h2>Deliveries<span class="privately-visible">*</span></h2>

        <h3><span class="fa fa-truck"></span> Incoming Deliveries</h3>
        {{^hasIncomingDeliveries}} None scheduled {{/hasIncomingDeliveries}}
        {{#hasIncomingDeliveries}}
        <div class="table-container">
            <table class="delivery-table">
                <thead>
                    <tr>
                        <th></th>
                        <th>Delivery Date</th>
                        <th>From</th>
                        <th>Status</th>
                        <th>Item Count</th>
                        <th>Items</th>
                    </tr>
                </thead>
                <tbody>
                    {{#incomingDeliveries}}
                    <tr>
                        <td><a href="{{detailLink}}">[Details]</a></td>
                        <td>{{deliveryDate}}</td>
                        <td><a href="{{fromSiteLink}}">{{fromSite}}</a></td>
                        <td>{{deliveryStatus}}</td>
                        <td>{{itemCount}}</td>
                        <td>{{itemListTruncated}}</td>
                    </tr>
                    {{/incomingDeliveries}}
                </tbody>
            </table>
        </div>
        {{/hasIncomingDeliveries}}

        <h3>
            <span class="fa fa-truck outgoing-truck"></span> Outgoing Deliveries
        </h3>
        {{^hasOutgoingDeliveries}} None scheduled {{/hasOutgoingDeliveries}}
        {{#hasOutgoingDeliveries}}

        <div class="table-container">
            <table class="delivery-table">
                <thead>
                    <tr>
                        <th></th>
                        <th>Delivery Date</th>
                        <th>To</th>
                        <th>Status</th>
                        <th>Item Count</th>
                        <th>Items</th>
                    </tr>
                </thead>
                <tbody>
                    {{#outgoingDeliveries}}
                    <tr>
                        <td><a href="{{detailLink}}">[Details]</a></td>
                        <td>{{deliveryDate}}</td>
                        <td><a href="{{toSiteLink}}">{{toSite}}</a></td>
                        <td>{{deliveryStatus}}</td>
                        <td>{{itemCount}}</td>
                        <td>{{itemListTruncated}}</td>
                    </tr>
                    {{/outgoingDeliveries}}
                </tbody>
            </table>
        </div>
        {{/hasOutgoingDeliveries}}
        {{/loggedIn}}

        <h2>
            Inventory
            {{#loggedIn}}
            <a class="edit-link" href="{{{editInventoryLink}}}">[edit]</a>
            <span class="privately-visible">*</span>
            {{/loggedIn}}
        </h2>
        <div class="table-container">
            <table class="inventory-table">
                <tr>
                    <th>{{#hasNeeds}}Needs List{{/hasNeeds}}</th>
                    <th>{{#hasAvailable}}Available List{{/hasAvailable}}</th>
                </tr>
                <tr>
                    <td class="inventory-column">
                        <div class="horizontal">
                            <ul>
                            {{#needsList1}}
                                <li><div class="{{displayClass}}">{{name}}</div></li>
                            {{/needsList1}}
                            </ul>
                            <ul>
                            {{#needsList2}}
                            <li><div class="{{displayClass}}">{{name}}</div></li>
                            {{/needsList2}}
                            </ul>
                        </div>
                    </td>

                    <td class="inventory-column">
                        <div class="horizontal">
                            <ul>
                                {{#availableList1}}
                                <li><div class="{{displayClass}}">{{name}}</div></li>
                                {{/availableList1}}
                            </ul>
                            <ul>
                                {{#availableList2}}
                                <li><div class="{{displayClass}}">{{name}}</div></li>
                                {{/availableList2}}
                            </ul>
                        </div>
                    </td>
                </tr>
            </table>
        </div>

        {{#loggedIn}}
        <a id="needs-matching"></a>
        <h2>Needs Matching<span class="privately-visible">*</span> ({{matchCount}} sites)</h2>
        <p>The below sites have supplies that are needed and can be transported to the current site.</p>
        <div class="table-container">
            <table class="needs-matching">
                <thead>
                    <tr>
                        <th>Map</th>
                        <th>Site Name</th>
                        <th>Distance</th>
                        <th class="wider-column">Item</th>
                        <th>Item Count</th>
                    </tr>
                </thead>
                <tbody>
                    {{#needsMatching}}
                    <tr>
                        <td>
                            <div class="map">
                                <iframe
                                    width="300"
                                    height="300"
                                    class="gmap_iframe"
                                    frameborder="0"
                                    scrolling="no"
                                    marginheight="0"
                                    marginwidth="0"
                                    src="https://maps.google.com/maps?z=8&width=300&height=300&hl=en&q={{googleMapsAddress}}&ie=UTF8&iwloc=B&output=embed"
                                >
                                </iframe>
                            </div>
                        </td>

                        <td class="padded">
                            <div class="vertical site-title">
                                <div class="bold site-name">
                                    <a href="{{{siteLink}}}">{{siteName}}</a>
                                </div>
                                <div>{{siteAddress}}</div>
                                <div class="city-name">{{city}}</div>
                                <div>{{county}} county, {{state}}</div>
                            </div>
                        </td>
                        <td>
                            {{#distanceMiles}}{{.}} miles{{/distanceMiles}}<br>
                            {{#driveTime}}{{.}}{{/driveTime}}
                        </td>
                        <td>
                            <div class="horizontal">
                                <ul>
                                    {{#items1}}
                                    <li class="{{urgencyCssClass}}">{{name}}</li>
                                    {{/items1}}
                                </ul>
                                <ul>
                                    {{#items2}}
                                    <li class="{{urgencyCssClass}}">{{name}}</li>
                                    {{/items2}}
                                </ul>
                            </div>
                        </td>
                        <td class="center">{{itemCount}}</td>
                    </tr>
                    {{/needsMatching}}
                </tbody>
            </table>
        </div>
        {{/loggedIn}}
    </body>
</html>
